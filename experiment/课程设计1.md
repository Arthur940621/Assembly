# 实验10 编写子程序


## 显示字符串

### 问题

显示字符串是现实工作中经常要用到的功能，应该编写一个通用的子程序来实现这个功能。提供灵活的调用接口，使调用者可以决定显示的位置（行、列）、内容和颜色。

### 子程序描述
- 名称: `show_str`
- 功能: 在指定的位置，用指定的颜色，显示一个用 `0` 结束的字符串
- 参数: `(dh)=行号`（取值范围 `0~24`），`(dl)=列号`（取值范围 `0~79`），`(cl)=颜色`，`ds:si` 指向字符串的首地址
- 返回: 无
- 应用举例: 在屏幕的 `8` 行 `3` 列，用绿色显示 `data` 段中的字符串

```asm
assume cs:code
data segment
    db 'Welcome to masm!',0
data ends
code segment
start:
    mov dh,8
    mov dl,3
    mov cl,2
    mov ax,data
    mov ds,ax
    mov si,0
    call show_str
    mov ax,4c00h
    int 21h
show_str:
    ...

code ends
end start
```

### 提示
- 子程序的入口参数是屏幕上的行号和列号，注意在子程序内部要将它们转化为显存中的地址，首先要分析一下屏幕上的行列位置和显存地址的对应关系
- 注意保存子程序中用到的相关寄存器
- 这个子程序的内部处理和显存的结构密切相关，但是向外提供了与显存结构无关的接口。通过调用这个子程序，进行字符串的显示时可以不必了解显存的结构，为编程提供了方便。

```asm
show_str:
    ; 将子程序用到的寄存器内容入栈
    push ax
    push bx
    

```